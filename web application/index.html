<!DOCTYPE html>
<html>
	<head>
	<!--  // Using special characters-->
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
	<!-- Jquery-->
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
	 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	 <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	 <script src="libraries/jQuery.js"></script>
	 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

	<!-- Map environment-->
	<link rel="stylesheet" href="libraries/leaflet-0.7/leaflet.css" />
		<link rel="stylesheet" href="libraries/Leaflet.draw/dist/leaflet.draw.css" />
		<link rel="stylesheet" href="libraries/MiniMap/fullscreen.css" />
		<link rel="stylesheet" href="libraries/MiniMap/src/Control.MiniMap.css" />

		<link rel="stylesheet" href="libraries/Measure/leaflet.measurecontrol.css" />
		<link rel="stylesheet" href="libraries/WL_overview/leaflet.overviewcontrol.css" />
		<link rel="stylesheet" href="libraries/L.Control.Sidebar.css" />
		
		
		
		<link rel="stylesheet" href="libraries/ExplorerModus/leaflet.explorermodus.css" />
		
		<script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
		<script src="libraries/Leaflet.draw/dist/leaflet.draw.js" type="text/javascript"></script>
		<script src="libraries/MiniMap/src/Control.MiniMap.js" type="text/javascript"></script>
		<script src="libraries/Measure/leaflet.measurecontrol.js" type="text/javascript"></script>
		<script src="libraries/WL_overview/leaflet.overviewcontrol.js" type="text/javascript"></script>
		<script src="libraries/ExplorerModus/leaflet.explorermodus.js" type="text/javascript"></script>
		<script type='text/javascript' src="libraries/GeometryUtil/dist/leaflet.geometryutil.js"></script>
		<script type='text/javascript' src="libraries/leaflet.almostover.js"></script>
		
		<script type="text/javascript" src="libraries/L.Control.Sidebar.js"></script>

	<!-- awesome markers-->
		<script src="dist/leaflet.awesome-markers.js"></script>
		<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" rel="stylesheet">
		<link rel="stylesheet" href="dist/leaflet.awesome-markers.css">
		
	 <!-- Include the loading control -->
		<link rel="stylesheet" href="libraries/Leaflet.loading/Control.Loading.css" />
		<script src="libraries/Leaflet.loading/Control.Loading.js"></script>	

		
	<!-- created style sheets and scripts-->
		<link href="libraries/bootstrap/css/bootstrap.css" rel="stylesheet">
		<link rel="stylesheet" href="libraries/custom_css.css"/>

	<!-- SPARQL library-->
		<script type="text/javascript" src="libraries/sparql.js"></script>

	<!--Add WL boundary Geojson as JS variable WLBoundaries"/>-->
	<script type="text/javascript" src="data/WL_boundaries_WGS84.js"></script>


	<!--Json merge for visualization"/>-->
		<script type="text/javascript" src="libraries/jsonmerge.js"></script>

	<!--Json merge for sir value"/>-->
		<script type="text/javascript" src="libraries/jsonmerge_sir.js"></script> 

	<!--functions for creating emitter visualization"/>-->
		<script type="text/javascript" src="libraries/visualize_emitter.js"></script> 

	<!--Add functions for the sparql panel/>-->
		<script type="text/javascript" src="ibraries/sparqlpanel.js"></script>

	<!--Validation"/>-->
		<script type="text/javascript" src="libraries/validation.js"></script>

	<!--MarkerCluster/>-->
		<link rel="stylesheet" href="libraries/Leaflet.markercluster/dist/MarkerCluster.css" />
		<link rel="stylesheet" href="Leaflet.markercluster/dist/MarkerCluster.Default.css" />
		<script src="Leaflet.markercluster/dist/leaflet.markercluster-src.js"></script>
	
	<!--Explorer Modus Functions/>-->
	<script type="text/javascript" src="libraries/explorer.js"></script>
	<script src="libraries/L.Map.Sync.js"></script>
	
	<script src="libraries/explorer_airquality.js"></script>
	<script src="libraries/aqd_sparql.js"></script>


	<style>
	<!--Info from hover box>-->
		.info {
			padding: 6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255,255,255,0.8);
			box-shadow: 0 0 15px rgba(0,0,0,0.2);
			border-radius: 5px;
		}
		.info h4 {
			margin: 0 0 5px;
			color: #777;
		}


		.info2 {
			padding: 6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255,255,255,0.8);
			box-shadow: 0 0 15px rgba(0,0,0,0.2);
			border-radius: 5px;
		}
		.info2 h4 {
			margin: 0 0 5px;
			color: #777;
		}


		#map { 
					position: absolute;
					<!--top:0;-->
					height:auto;
					left: 0;
					right: 0;
					<!--bottom:10;-->
					[b]left: 50%;[/b]
					[b]margin-left: -500px;[/b] /* negative Hälfte von width:1000px */
				}
				.leaflet-control.enabled a {
					background-color: yellow;
				}
				
		

	</style>
	
	<style>
		/*	#map {
				float:left;
				
				width: 100%;
				height: 700px;
			}
			*/
			#map2 {
				
				min-width:38%;
				margin-left:2%;
				
			}
			
			.clear {
			clear: both;
			}
			
			
			#control {
				float:right;
				margin-top:0px;
				width: 20%;
				height: 50%
			}

			.info {
				padding: 6px 8px;
				font: 14px/16px Arial, Helvetica, sans-serif;
				background: white;
				background: rgba(255,255,255,0.8);
				box-shadow: 0 0 15px rgba(0,0,0,0.2);
				border-radius: 5px;
			}
			.info h4 {
				margin: 0 0 5px;
				color: #777;
			}

			.legend {
				text-align: left;
				line-height: 18px;
				color: #555;
			}
			.legend i {
				width: 18px;
				height: 18px;
				float: left;
				margin-right: 8px;
				opacity: 0.7;}
				
				
				.btnStyle {
			background-color: #4D90FE; 
			background-image: -moz-linear-gradient(center top , #4D90FE, #4787ED); 
			border: 1px solid #3079ED; 
			color: #FFFFFF;
			padding: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			width:100%
		}

			.lblStyle {
			color: red;
			padding: 4px;
			margin-top: 4px;
			margin-bottom: 4px;
			width: 100%;
			font-weight: bold;
		}
		
		
		

		
		
		
		
		
		
			
	</style>
		

	<title>CancerExplorer</title>


	</head>

<!--*****************************************************************	BODY	********************************************-->
	<body style="background-color:#000000">

			
	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		  <div class="container">
			<div class="navbar-header">
			  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			  </button>
			  <!--<div style="position:absolute;left:30%;top:20%;"><button type="button" onclick="Query()">Query</button></div>-->
			  <a class="navbar-brand" href="#">Cancer Explorer</a>
			</div>
			<div class="collapse navbar-collapse">
			  <ul class="nav navbar-nav">
				<li onclick="" class="active"><a href="#">Map</a></li>
				
				<li onclick="Sparql_panel_edit()"><a href="#">SPARQL Query</a></li>
				<li onclick="Query()"><a href="#">Explore cancer incidents</a></li>
				<li onclick="Explore_cause_effect();"><a href="#">Explore cause-effect relations</a></li>
				<!---->
				<li onclick="mylocation()"><a href="#">Get my location</a></li>
				
				
				<!--Add information:-->
				<li onclick=""><a href="#">Further links</a></li>
				
			  </ul>
			</div><!--/.nav-collapse -->
		  </div>
		</div>

	<!-- Main div structure on page style="position:absolute;left:25px; top:51px; width: 40%; height: 80%;"-->
		

		<div id="map" style="position:absolute;left:25px; top:51px; width: 97%; height: 80%;" >
		
	 
	  
	 
	  
	 
	  
	 <!-- sir sidebar -->

	 <div id="sir_sidebar"> 
		<br> <b><font size=4px>Create a certain Example Standardized Incidence Ratio (SIR) visualization:  </b></font>
		<br>
		<div style="padding-top:15px">
		<b><font size=3px>Choose a cancer type:</b></font>
		</div>
		<div style="border: thin solid #000000; border-bottom-width: 0px;">
		</div>
		<div style="padding-top:10px">
			<input type="radio" id="sirbladdercancer" class="obsType" name="obsType" value="C67" checked="checked">&nbsp;Bladder cancer &nbsp;
			<input type="radio" id="sirlungcancer" class="obsType" name="obsType" value="C34">&nbsp;Lung cancer &nbsp;
			<input type="radio" id="sirleukemiacancer" class="obsType" name="obsType" value="C91-C95">&nbsp;Leukemia &nbsp;&nbsp;&nbsp;<br>
			<input type="radio" id="sirnasalcancer" class="obsType" name="obsType" value="C00-C14">&nbsp;Nasal cavity and paranasal sinus &nbsp;
			
		</div>
		<br>
		
		<div style="padding-top:15px">
		<b><font size=3px>Choose a year:</b></font>
		</div>
		<div style="border: thin solid #000000; border-bottom-width: 0px;">
		</div>
		<div style="padding-top:10px">
			<input type="radio" id="sir2006" name="obsType1" value="2006">&nbsp;2006 &nbsp;
			<input type="radio" id="sir2007" name="obsType1" value="2007">&nbsp;2007 &nbsp;
			<input type="radio" id="sir2008" name="obsType1" value="2008">&nbsp;2008 &nbsp;
			<input type="radio" id="sir2009" name="obsType1" value="2009">&nbsp;2009 &nbsp;
			<input type="radio" id="sir2010" name="obsType1" value="2010">&nbsp;2010 &nbsp;
			<input type="radio" id="sir2011" name="obsType1" value="2011">&nbsp;2011 &nbsp;
		</div>
			
		<div style="padding-top:15px">
		<b><font size=3px>Choose a gender:</b></font>
		</div>
		<div style="border: thin solid #000000; border-bottom-width: 0px;">
		</div>
		<div style="padding-top:10px">
			<input type="radio" id="sirfemale" name="obsType2" value="w">&nbsp;female
			<input type="radio" id="sirmale" name="obsType2" value="m">&nbsp;male &nbsp;&nbsp;
			
			
		</div>
			
		<br>
		<button type="button" onclick="sir_clear()" class="btnStyle span3">Clear Selection</button>
		<button type="button" onclick="ini_sir()" class="btnStyle span3">Visualize Example SIR</button>
		<button type="button" onclick="ini_cilower()" class="btnStyle span3">Visualize Example CI95 Lower Level</button> 
		<button type="button" onclick="ini_ciupper()" class="btnStyle span3">Visualize Example CI95 Upper Level</button>
		
		</div>


	 <div id="SPARQLPanel">
		

		<!-- empty html div-element ... placeholder for results (text/canvas/map etc)-->
		<div id="resultdiv"></div>
		<br/>
	  </div>
	  
		<div id="SPARQLPanel_edit">
		<textarea id="sparqlQuery" rows="5" cols="40" class="field span12">Select ?a ?b ?c WHERE {?a ?b ?c} Limit 10</textarea><br/>
		<button type="submit" class="btn btn-primary" onclick="SPedit()">Submit Query</button><br/><br/>

		<!-- empty html div-element ... placeholder for results (text/canvas/map etc)-->
		<div id="resultdiv_edit"></div>
		<br/>	

		
	  </div>



	<!-- Definition of link sidebar-->
	<!-- Currently not used-->


	 <div id="sidebarLinks"> 

	<h>Here should be some further information.</h>
	<br>

	</div>




		<div id="Cause_Effect_Panel"> 

			<br> <b><font size=4px>Get more information about cancer causes:  </b></font>
				<br>
				<div style="padding-top:15px">
				<b><font size=3px>Choose a cancer type:</b></font>
				</div>
				<div style="border: thin solid #000000; border-bottom-width: 0px;">
				</div>
				<div style="padding-top:10px">
					<input type="radio" id="sirbladdercancer" class="obsType" name="obsType3" value="C67" checked="checked">&nbsp;Bladder cancer &nbsp;
					<input type="radio" id="sirlungcancer" class="obsType" name="obsType3" value="C34">&nbsp;Lung cancer &nbsp;
					<input type="radio" id="sirleukemiacancer" class="obsType" name="obsType3" value="C91-C95">&nbsp;Leukemia &nbsp;&nbsp;&nbsp;<br>
					<input type="radio" id="sirnasalcancer" class="obsType" name="obsType3" value="C00-C14">&nbsp;Nasal cavity and paranasal sinus &nbsp;		
				</div>
				<br>
				<button type="button" onclick="ini_carcinogen()" class="btnStyle span3">Information about carcinogens of a type of cancer- Please choose a cancer type </button>
				<br>
				<div style="padding-top:15px">
				<b><font size=4px>Further information examples:  </b></font>
				</div>
				<div style="border: thin solid #000000; border-bottom-width: 0px;">
				</div>
				<br>
				<b><font size=2px>Show examples for biggest emitter of air transported substances in Münster (only a small emitter_contenting set at the moment</b></font>
				<br>
				<button type="button" onclick="ini_emitter()" class="btnStyle span3">Example Emitter Münster </button>


		</div>





		<div id="Emitter_detail"> 

			<h3>Emitter details:</h3>
			<form>
			  <fieldset>
				<legend>Address</legend>
				<table>
				  <tr>
					<td><b>Name:</b></td>
					<td><div id="name"> </div></td>
					<td><b>Zip & City:</b></td>
					<td><div id="zip"> </div></td>
				  </tr><tr>
					<td><b>Street:</b></td>
					<td><div id="street"> </div></td>
				  </tr>
				  </br>
				  <tr>
					<td><b>Emission process:</b></td>
					<td><div id="emissionprocess"> </div></td>
				  </tr>
				</table>
			  </fieldset>
			  <br>
			  <fieldset>
				<legend>Emitted substances</legend>
				<b>Emissions from operator of the facility's emissions declaration 2008.</b><br>
				<b>Measurements in kg/a, Dioxine/Furane as I-TE in mg/a. </b><br>
			  <br>
			  <br>  
			  <table align="center">
			      <tr bgcolor="#58ACFA">    
					<td><b>Substances:</b></td><td>        </td>
					<td><b>Values:</b></div></td>
				  </tr><tr>
					<td><b>N2O</b></td><td>        </td>
					<td><div id="N2O"> </div></td>
				  </tr><tr bgcolor="#D8D8D8">
					<td><b>CO2</b></td><td>        </td>
					<td><div id="CO2"> </div></td>
				  </tr><tr>
					<td><b>CH4</b></td><td>        </td>
					<td><div id="CH4"> </div></td>
				  </tr><tr bgcolor="#D8D8D8">
					<td><b>NH3</b></td><td>        </td>
					<td><div id="NH3"> </div></td>
				  </tr><tr>
					<td><b>HCL</b></td><td>        </td>
					<td><div id="HCL"> </div></td>					
				  </tr><tr bgcolor="#D8D8D8">
					<td><b>HF</b></td><td>        </td>
					<td><div id="HF"> </div></td>
					</tr><tr>
					<td><b>CO</b></td><td>        </td>
					<td><div id="CO"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>NMVOC</b></td><td>        </td>
					<td><div id="NMVOC"> </div></td>
					</tr><tr>
					<td><b>SO2</b></td><td>        </td>
					<td><div id="SO2"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>NO2</b></td><td>        </td>
					<td><div id="NO2"> </div></td>
					</tr><tr>
					<td><b>As</b></td><td>        </td>
					<td><div id="As"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>Pb</b></td><td>        </td>
					<td><div id="Pb"> </div></td>
					</tr><tr>
					<td><b>Cr</b></td><td>        </td>
					<td><div id="Cr"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>Cu</b></td><td>        </td>
					<td><div id="Cu"> </div></td>
					</tr><tr>
					<td><b>Cd</b></td><td>        </td>
					<td><div id="Cd"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>Ni</b></td><td>        </td>
					<td><div id="Ni"> </div></td>
					</tr><tr>
					<td><b>V</b></td><td>        </td>
					<td><div id="V"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>Zn</b></td><td>        </td>
					<td><div id="Zn"> </div></td>
					</tr><tr>
					<td><b>DUF</b></td><td>        </td>
					<td><div id="DUF"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>BAP</b></td><td>        </td>
					<td><div id="BAP"> </div></td>
					</tr><tr>
					<td><b>BENZ</b></td><td>        </td>
					<td><div id="BENZ"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>PAK</b></td><td>        </td>
					<td><div id="PAK"> </div></td>
					</tr><tr>
					<td><b>PM10</b></td><td>        </td>
					<td><div id="PM10"> </div></td>
					</tr><tr bgcolor="#D8D8D8">
					<td><b>Staub</b></td><td>        </td>
					<td><div id="Staub"> </div></td>
					</tr><tr>
					<td><b>RUSS</b></td><td>        </td>
					<td><div id="RUSS"> </div></td>
				  </tr>
				</table>
				<br>
				<b>Source:</b><br>
				<b>Landesamt für Natur, Umwelt und Verbraucherschutz<br>
				   © Land NRW, Recklinghausen, http://www.lanuv.nrw.de</b><br>
				
			  </fieldset>
			</form>


		</div>


	 
	</div>
	 <div class="clear"></div>
	
	<div id="map2" style="float:left; margin-left:45%; top:51px; width: 0%; height: 0%;">
	</div>
	
	
	
	
	
	<div id="control" style=" float:right; margin-top:60px; margin-right:20px;  width: 10%; height: 0%;" hidden="true" background="white">
	
	
	
	<button type="button" onclick="explorer_sidebar()" class="btnStyle span3">Explore Air Quality Data</button>
	
	
	<font color=white size=1px><b>Source: Landesamt für Natur, Umwelt und Verbraucherschutz<br>
				   © Land NRW, Recklinghausen, http://www.lanuv.nrw.de</b><br> 
				   <br>
				   <br>
				   <b>Emissions from operator of the facility's emissions declaration 2008.</b><br>
				   <b>Measurements in kg/a, Dioxine/Furane as I-TE in mg/a. </b><br>
				   
				   
				   
				   </font>
	
	
	<form action="index.html">
    <input type="submit" class="btnStyle span3" value="Leave Explorer Modus">
	</form>
	</div>
	
	
	
	<div id="aqd_results_sidebar"> 
		<div id="resultdiv_map2"></div>
	</div>
	
	<div id="explorer_sidebar"> 
		
	<div style="padding-top:15px">
		<b><font size=3px color=black>Choose an air emission value to explore:</b></font>
		</div>
		<div style="border: thin solid #000000; border-bottom-width: 0px;">
		</div>
		
		<font size=2px color=black>First, choose an emission branch</font>
		<select class="form-control" name="list_branch" id="list_branch">
		<option value="start">Please Select</option>
		<option value="Industry">Industry</option>
		<option value="Traffic">Traffic</option>
		<option value="SmallCombustionPlant">Small Combustion Plant</option>
		<option value="Agriculture">Agriculture</option>
		<option value="Total">All emission branches</option>
		</select>
	
		
		<br>
		
		<font size=2px color=black>Choose an emitted substance</font>
		<select class="form-control" name="list_substance" id="list_substance">
		<option value="start">Please Select</option>
		<option value="N2O">N2O</option>
		<option value="CO2">CO2</option>
		<option value="CH4">CH4</option>
		<option value="NH3">NH3</option>
		<option value="HCL">HCL</option>
		<option value="HF">HF</option>
		<option value="CO">CO</option>
		<option value="NMVOC">NMVOC</option>
		<option value="SO2">SO2</option>
		<option value="NO2">NO2</option>
		<option value="As">As</option>
		<option value="Pb">Pb</option>
		<option value="Cr">Cr</option>
		<option value="Cu">Cu</option>
		<option value="Cd">Cd</option>
		<option value="Ni">Ni</option>
		<option value="V">V</option>
		<option value="Zn">Zn</option>
		<option value="DUF">DUF</option>
		<option value="BAP">BAP</option>
		<option value="BENZ">BENZ</option>
		<option value="PAK">PAK</option>
		<option value="PM10">PM10</option>
		<option value="Staub">Staub</option>
		<option value="RUSS">RUSS</option>
		</select>
	<br>
	<br>
	<br>
	<br>
	<button type="button" onclick="explorer_airquality()" class="btnStyle span3">Visualize</button>
	
	
	<!-- empty html div-element ... placeholder for results (text/canvas/map etc)-->
	
		<br/>
	  </div>
	
	
	</div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<script>
	
	
	
	
	
	
	//document.getElementById("map2").hidden = true;
	var info = L.control();
	var info2 = L.control();
	//variables for multiple query control
	var secondquery=false;
	var querynumber=0;
	var clear_sir=false;
	var legend2
	var check_detail_view
	var layer
	
	//Check the selections, submit parameter to the SPARQL/AJAX function

	function ini_sir () {

		var sir_cancer
		var sir_year
		var sir_gender
		var sir_cancer_add
		var check_choice="SIR";
		var cancer_type_name
		

		$('#year_list').click(function(){
			alert($("input[name='obstype1']:checked").val());
		});

		secondquery=true;
		querynumber=querynumber+1;
		$(document).ready(function(){

		sir_cancer = $("input:radio[name ='obsType']:checked").val()
		sir_year=$('input[name="obsType1"]:checked').val();
		sir_gender=$('input[name="obsType2"]:checked').val();
		
		
		if (sir_cancer=="C67"){
			
			cancer_type_name="Bladder Cancer";
			
		}
		if (sir_cancer=="C34"){
			
			cancer_type_name="Lung Cancer";
			
		}
		if (sir_cancer=="C00-C14"){
			
			cancer_type_name="Nasal_cavity_and_paranasal_sinus Cancer";
			
		}
		if (sir_cancer=="C91-C95"){
			
			cancer_type_name="Leukemia";
			
		}
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		if (sir_input_check()==true){
			visualize_sir (sir_cancer,sir_cancer_add,sir_year,sir_gender,check_choice,cancer_type_name);
		}
		});

	}

	function ini_cilower () {

		var sir_cancer
		var sir_year
		var sir_gender
		var sir_cancer_add
		var check_choice="CI_lower_level";
		var cancer_type_name

		$('#year_list').click(function(){
			alert($("input[name='obstype1']:checked").val());
		});


		$(document).ready(function(){

		sir_cancer = $("input:radio[name ='obsType']:checked").val()
		sir_year=$('input[name="obsType1"]:checked').val();
		sir_gender=$('input[name="obsType2"]:checked').val();
		secondquery=true;
		querynumber=querynumber+1;
		
		if (sir_input_check()==true){
			visualize_sir(sir_cancer,sir_cancer_add,sir_year,sir_gender,check_choice,cancer_type_name);
		}
		});

	}


	function ini_ciupper () {

		var sir_cancer
		var sir_year
		var sir_gender
		var sir_cancer_add
		var cancer_type_name
		var check_choice="CI_upper_level";

		$('#year_list').click(function(){
			alert($("input[name='obstype1']:checked").val());
		});

		$(document).ready(function(){
		secondquery=true;
		querynumber=querynumber+1;
		sir_cancer = $("input:radio[name ='obsType']:checked").val()
		sir_year=$('input[name="obsType1"]:checked').val();
		sir_gender=$('input[name="obsType2"]:checked').val();

		if (sir_input_check()==true){
			visualize_sir(sir_cancer,sir_cancer_add,sir_year,sir_gender,check_choice,cancer_type_name);
		}
		});

	}

	function ini_carcinogen () {

		var sir_cancer
		var sir_year
		var sir_gender
		var check_choice="Carcinogen";

		$('#year_list').click(function(){
			alert($("input[name='obstype1']:checked").val());
		});

		$(document).ready(function(){

		sir_cancer = $("input:radio[name ='obsType3']:checked").val()
		if (sir_cancer=="C67"){
			sir_cancer="Bladder";
			cancer_type_name="Bladder Cancer";
			sir_cancer_add="Cancer";
		}
		if (sir_cancer=="C34"){
			sir_cancer="Lung";
			cancer_type_name="Lung Cancer";
			sir_cancer_add="Cancer";
		}
		if (sir_cancer=="C00-C14"){
			sir_cancer="Nasal_cavity_and_paranasal_sinus";
			cancer_type_name="Nasal_cavity_and_paranasal_sinus Cancer";
			sir_cancer_add="";
		}
		if (sir_cancer=="C91-C95"){
			sir_cancer="Leukemia";
			cancer_type_name="Leukemia";
			sir_cancer_add="";
		}
		sir_year=$('input[name="obsType1"]:checked').val();
		sir_gender=$('input[name="obsType2"]:checked').val();

		if (inci_input_check()==true){
			visualize_sir(sir_cancer,sir_cancer_add,sir_year,sir_gender,check_choice,cancer_type_name);
		}
		});

	}


	//to represent emitter locations

	function ini_emitter () {

	
		

		var order=0;
		var sir_cancer
		var sir_year
		var sir_gender
		var sir_cancer_add
		var cancer_type_name
		var check_choice="Emitter";

		$(document).ready(function(){

			visualize_sir(sir_cancer,sir_cancer_add,sir_year,sir_gender,check_choice,cancer_type_name);
			order++;
		});
       if (sir_check=true){
	   
			info.update = function (props) {
					this._div.innerHTML = '<h4>Region Westphalen Lippe</h4>' +  (props ?
						'<b>Municipality: ' + props.Name + '</b><br />GKZ: ' + props.GKZ + ''
						: 'Click a marker for more information');
			};	
			info.update();
	   }
	/*  
	   if(info_check==false){
			info.addTo(map);
			info_check=true;
		}   */
	}





	//Functions for map display

	function getColor(d) {
		return d > 5550000 ? '#800026' :
			   d > 5555000 ? '#BD0026' :
			   d > 5560000 ? '#E31A1C' :
			   d > 5556500 ? '#FC4E2A' :
			   d > 5570000 ? '#FD8D3C' :
			   d > 5575000 ? '#FEB24C' :
			   d > 5580000 ? '#FED976' :
							 '#FFEDA0';
	}

	function style(feature) {
		return {
			fillColor: getColor(feature.properties.GKZ),
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7
		};
	}
	
	
	function style3(feature) {
	
			/*
			if (layer != undefined){
			alert(layer.feature.properties.Name);
			if (layer.feature.properties.Name == feature.properties.Name) {
		    return {
			fillColor: getColor(feature.properties.GKZ),
			weight: 2,
			opacity: 1,
			color: 'red',
			dashArray: '3',
			fillOpacity: 0.7
			};}}
			else{              */
			return {
			fillColor: getColor(feature.properties.GKZ),
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7
			
			
		};
		//}
	}



	//create map
	var map = new L.Map('map', {
				//crs: L.CRS.EPSG3857,
				center: [51.95442, 7.62709],
				zoom: 7,
				zoomcontrol:true
				});
	
	var map2 = new L.Map('map2', {
				//crs: L.CRS.EPSG3857,
				center: [51.95442, 7.62709],
				zoom: 7,
				zoomcontrol:true
				});
				
			
				
	// Loading status
	  var loadingControl = L.Control.loading({
		separate: true
		});
	map.addControl(loadingControl);
	map2.addControl(loadingControl);
				
	// Add our zoom control manually where we want to

	var zoomControl = L.control.zoom({
		position: 'topright'
		});
	map.addControl(zoomControl);
	map2.addControl(zoomControl);
	
	
				

	// sidebars

	var sir_sidebar = L.control.sidebar('sir_sidebar', {
		position: 'right'
	});

	var emitter_detail = L.control.sidebar('Emitter_detail', {
		position: 'left'
	});


	var SPARQLPanel = L.control.sidebar('SPARQLPanel', {
		position: 'right'
	});
	
	var AQDResultsPanel = L.control.sidebar('aqd_results_sidebar', {
		position: 'right'
	});


	var SPARQLPanel_edit = L.control.sidebar('SPARQLPanel_edit', {
		position: 'right'
	});


	var sidebarLinks = L.control.sidebar('sidebarLinks', {
		position: 'right'
	});

	var Cause_Effect_Panel = L.control.sidebar('Cause_Effect_Panel', {
		position: 'right'
	});
	
	var Explorer_Panel = L.control.sidebar('explorer_sidebar', {
		position: 'right'
	});

		


	// Add sidebar controls to the map


	map.addControl(SPARQLPanel);
	map.addControl(SPARQLPanel_edit);
	map.addControl(Cause_Effect_Panel);
	map.addControl(sir_sidebar);
	map.addControl(sidebarLinks);
	map.addControl(emitter_detail);
	
	map2.addControl(AQDResultsPanel);
	map2.addControl(Explorer_Panel);
	

	// Sidebar control functions
	function Explore_cause_effect()
	{
		Cause_Effect_Panel.show();
		SPARQLPanel.hide();
		sir_sidebar.hide();
		SPARQLPanel_edit.hide();
		clear_emitter_locations();
	}


	function Sparql_panel()
	{
		SPARQLPanel.show();
		Cause_Effect_Panel.hide();
		clear_emitter_locations();
	}


	function Query()
	{
		clear_emitter_locations();
		sir_sidebar.show();
		Cause_Effect_Panel.hide();
		SPARQLPanel.hide();
		SPARQLPanel_edit.hide();
	}

	function Sparql_panel_edit()
	{
		sir_sidebar.hide();
		Cause_Effect_Panel.hide();
		SPARQLPanel.hide();
		SPARQLPanel_edit.show();
		clear_emitter_locations();
	}
	
	
	function explorer_sidebar()
	{
		
		Explorer_Panel.show();
		
	}
	
	
	
	
	////////////////////////////////////////////////////




	
	function visualize_emitter (results){

	map.removeLayer(SIRLayer);
	var markers = [];
	var marker;
	
	
	// quick version-better style to do this with a loop
	for(var i=0;i<results.results.bindings.length;i++){

	if(results.results.bindings[i].b.value=="http://www.example.org/def/Lat"){
		emitter_name=results.results.bindings[i].a.value;
	//actually not necessary, Name is an extra property
		var emitter_name2=emitter_name.substring(23);
		emitter_name2=emitter_name2.toUpperCase();

	//layergroup delete by closing;map zoom,additional information site
		var emitter_lat=results.results.bindings[i].c.value;}
	
	//check the propertys to the belonging emitter_name
	for(i2=0;i2<results.results.bindings.length;i2++){
		if(results.results.bindings[i2].a.value==emitter_name){
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/EmissionProcess"){
			emitter_emission=results.results.bindings[i2].c.value; }
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Name"){
			emitter_name3=results.results.bindings[i2].c.value; }
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/N2O"){
			emitter_N2O=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/CO2"){
			emitter_CO2=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/CH4"){
			emitter_CH4=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/NH3"){
			emitter_NH3=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/HCL"){
			emitter_HCL=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/HF"){
			emitter_HF=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/CO"){
			emitter_CO=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/NMVOC"){	
			emitter_NMVOC=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/SO2"){
			emitter_SO2=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/NO2"){
			emitter_NO2=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/As"){
			emitter_As=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Pb"){
			emitter_Pb=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Cr"){
			emitter_Cr=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Cu"){
			emitter_Cu=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Cd"){
			emitter_Cd=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Ni"){
			emitter_Ni=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/V"){
			emitter_V=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Zn"){
			emitter_Zn=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/DUF"){
			emitter_DUF=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/BAP"){
			emitter_BAP=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/BENZ"){
			emitter_BENZ=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/PAK"){
			emitter_PAK=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/PM10"){
			emitter_PM10=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Staub"){
			emitter_Staub=results.results.bindings[i2].c.value;}
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/RUSS"){
			emitter_RUSS=results.results.bindings[i2].c.value;}	
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Street"){
			emitter_Street=results.results.bindings[i2].c.value;}		
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/ZipCodeCity"){
			emitter_ZipCodeCity=results.results.bindings[i2].c.value;}




		// Dynamic detail view of the emitters
		if(results.results.bindings[i2].b.value=="http://www.example.org/def/Long"){
			var emitter_long=results.results.bindings[i2].c.value;
			var emitter_content;
            emitter_content=emitter_name3+"xxxxx"+emitter_N2O+"xxxxx"+emitter_emission+"xxxxx"+emitter_CO2+"xxxxx"+emitter_CH4+"xxxxx"+emitter_NH3+"xxxxx"+emitter_HCL+"xxxxx"+emitter_HF+"xxxxx"+emitter_CO+"xxxxx"+emitter_NMVOC+"xxxxx"+emitter_SO2+"xxxxx"+emitter_NO2+"xxxxx"+emitter_As+"xxxxx"+emitter_Pb+"xxxxx"+emitter_Cr+"xxxxx"+emitter_Cu+"xxxxx"+emitter_Cd+"xxxxx"+emitter_Ni+"xxxxx"+emitter_V+"xxxxx"+emitter_Zn+"xxxxx"+emitter_DUF+"xxxxx"+emitter_BAP+"xxxxx"+emitter_BENZ+"xxxxx"+emitter_PAK+"xxxxx"+emitter_PM10+"xxxxx"+emitter_Staub+"xxxxx"+emitter_RUSS+"xxxxx"+emitter_Street+"xxxxx"+emitter_ZipCodeCity;
			emitter_content=emitter_content.replace(/ /g,'_');
			emitter_name = L.marker([parseFloat(emitter_lat), parseFloat(emitter_long)],{icon: L.AwesomeMarkers.icon({icon: 'building', prefix: 'fa', markerColor: 'blue'})});
			
			emitter_name.bindPopup("<b>"+emitter_name3+"</b><br>Emission Process:</br>"+emitter_emission+'</br><a name='+emitter_content+'   onclick="Emitter_detail_sidebar(name)">See details</a>');
            
			
			markersLayer.addLayer(emitter_name);
	

	 
	}}}
	
	// visualize layer containing marker
			
			markersLayer.addTo(map);

	//remove Layers
	map.removeLayer(WL_boundary);
	map.removeLayer(geojsonadd);
		
	map.removeLayer(geojson);
	// clear Legend
		div2.innerHTML ="";
		
		
	// set view to Münster
	map.setView([51.95442, 8.10009], 10);

	// to add an info box.
		check_detail_view=true;
		
	}
	

		
	
}



////////////////////////////////////////////////////////////
	

//emitter_name3,emitter_N2O,emitter_emission,emitter_CO2,emitter_CH4,emitter_NH3,emitter_HCL,emitter_HF,emitter_CO,emitter_NMVOC,emitter_SO2,emitter_NO2,emitter_As,emitter_Pb,emitter_Cr,emitter_Cu,emitter_Cd,emitter_Ni,emitter_V,emitter_Zn,emitter_DUF,emitter_BAP,emitter_BENZ,emitter_PAK,emitter_PM10,emitter_Staub,emitter_RUSS,emitter_Street,emitter_ZipCodeCity
	
	function Emitter_detail_sidebar (name)
	{
	
	 name=name.replace(/_/g, ' ');
	 var array = name.split('xxxxx')
	


		
		document.getElementById("street").innerHTML=array[27];
		document.getElementById("name").innerHTML=array[0];
		document.getElementById("zip").innerHTML=array[28];
		document.getElementById("emissionprocess").innerHTML=array[2];
		document.getElementById("N2O").innerHTML=array[1];
		document.getElementById("CO2").innerHTML=array[3];
		document.getElementById("CH4").innerHTML=array[4];
		document.getElementById("NH3").innerHTML=array[5];
		document.getElementById("HCL").innerHTML=array[6];
		document.getElementById("HF").innerHTML=array[7];
		document.getElementById("CO").innerHTML=array[8];
		document.getElementById("NMVOC").innerHTML=array[9];
		document.getElementById("SO2").innerHTML=array[10];
		document.getElementById("NO2").innerHTML=array[11];
		document.getElementById("As").innerHTML=array[12];
		document.getElementById("Pb").innerHTML=array[13];
		document.getElementById("Cr").innerHTML=array[14];
		document.getElementById("Cu").innerHTML=array[15];
		document.getElementById("Cd").innerHTML=array[16];
		document.getElementById("Ni").innerHTML=array[17];
		document.getElementById("V").innerHTML=array[18];
		document.getElementById("Zn").innerHTML=array[19];
		document.getElementById("DUF").innerHTML=array[20];
		document.getElementById("BAP").innerHTML=array[21];
		document.getElementById("BENZ").innerHTML=array[22];
		document.getElementById("PAK").innerHTML=array[23];
		document.getElementById("PM10").innerHTML=array[24];
		document.getElementById("Staub").innerHTML=array[25];
		document.getElementById("RUSS").innerHTML=array[26];


		emitter_detail.show();
	}


	//Adding municipality borders

	var WL_boundary= L.tileLayer('http://{s}.tiles.mapbox.com/{id}/{z}/{x}/{y}.png', {
		id: 'WL_boundary',
		attribution: 'GKZ',
		setOpacity:10,	
	})
	
	var WL_boundary2= L.tileLayer('http://{s}.tiles.mapbox.com/{id}/{z}/{x}/{y}.png', {
		id: 'WL_boundary2',
		attribution: 'GKZ',
		setOpacity:10,	
	})
	
	
var WLBoundaries2=WLBoundaries;

	WL_boundary.addTo(map);
	WL_boundary2.addTo(map2);

	var geojsonadd=L.geoJson(WLBoundaries, {style: style}).addTo(map);
	var geojsonadd2=L.geoJson(WLBoundaries2, {style: style}).addTo(map2);



	//Adding map interaction
	// control that shows state info on hover
	//var info = L.control();

		info.onAdd = function (map) {
			while(secondquery==false){
		// while: otherwise producing node error after removing L.control
			
				this._div = L.DomUtil.create('div', 'info');
				this.update();
				return this._div;
			}
			};
		
		info2.onAdd = function (map2) {
			while(secondquery==false){
		//while: otherwise producing node error after removing L.control
			
				this._div2 = L.DomUtil.create('div2', 'info2');
				this.update();
				return this._div2;
			}
			};
	
			if(secondquery==false){
			info.update = function (props) {
				this._div.innerHTML = '<h4>Region Westphalen Lippe</h4>' +  (props ?
					'<b>Municipality: ' + props.Name + '</b><br />GKZ: ' + props.GKZ + ''
					: 'Hover over a state');
					
			};
			
			
			info2.update = function (props) {
				this._div2.innerHTML = '<h4>Region Westphalen Lippe</h4>' +  (props ?
					'<b>Municipality: ' + props.Name + '</b><br />GKZ: ' + props.GKZ + ''
					: 'Hover over a state');
					
			};
			
			
			
}
			//info_check=false;
			if(info_check==false){
			info.addTo(map);
			info2.addTo(map2);
            info_check=true;}

			// get color depending on population density value
			function getColor(d) {
				return d > 5515000 ? '#3B0B0B' :
					   d > 5515000 ? '#3B0B0B' :
					   d > 5515000 ? '#3B0B0B' :
					   d > 5515000  ? '#3B0B0B' :
					   d > 5515000   ? '#3B0B0B' :
					   d > 5514999   ? '#2E64FE' :
					   d > 5564048  ? '#3B0B0B' :
								  '#3B0B0B';
			}
		
		

			function style(feature) {
				return {
					weight: 2,
					opacity: 1,
					color: 'white',
					dashArray: '3',
					fillOpacity: 0.7,
					fillColor: getColor(feature.properties.GKZ)
				};
			}
var hover_selection
			function highlightFeature(e) {
				layer = e.target;
				

				layer.setStyle({
					weight: 3,
					color: '#2E64FE',
					dashArray: '',
					fillOpacity: 0.7
				});

				if (!L.Browser.ie && !L.Browser.opera) {
					layer.bringToFront();
					
				}
                
				/*
					L.geoJson(WLBoundaries2, {
style: function(feature) {
    switch (feature.properties.Name) {
        case layer.feature.properties.Name: return {color: '#2E64FE'};
        
    }
}
}).addTo(map);*/
				
				
				
				/*geojson2.setStyle({
					weight: 3,
					color: '#2E64FE',
					dashArray: '',
					fillOpacity: 0.7
				});*/
				
				hover_selection=layer.feature.properties.Name
				info.update(layer.feature.properties);
				info2.update(layer.feature.properties);
			}

			var geojson;

			function resetHighlight(e) {
				geojson.resetStyle(e.target);
				geojson2.resetStyle(e.target);
				info.update();
				info2.update();
			}

			function zoomToFeature(e) {
				map.fitBounds(e.target.getBounds());
				map2.fitBounds(e.target.getBounds());
			}

			function onEachFeature(feature, layer) {
				layer.on({
					mouseover: highlightFeature,
					mouseout: resetHighlight,
					click: zoomToFeature
				});
			}

			geojson = L.geoJson(WLBoundaries, {
				style: style,
				onEachFeature: onEachFeature
			}).addTo(map);
			
			
			var geojson2 = L.geoJson(WLBoundaries2, {
				style: style3,
				onEachFeature: onEachFeature
			}).addTo(map2);

			map.attributionControl.addAttribution('Text?');
			map2.attributionControl.addAttribution('Text?');


			var legend = L.control({position: 'bottomright'});

			legend.onAdd = function (map) {

				var div = L.DomUtil.create('div', 'info legend'),
					grades = [],  //0, 10, 20, 50, 100, 200, 500, 1000
					labels = [],
					from, to;

				for (var i = 0; i < grades.length; i++) {
					from = grades[i];
					to = grades[i + 1];

					labels.push(
						'<i style="background:' + getColor(from + 1) + '"></i> ' +
						from + (to ? '&ndash;' + to : '+'));
				}

				div.innerHTML = labels.join('<br>');
				return div;
			};

			//legend.addTo(map);


	////////////////////////////////////////////////////	Base&Overlay Layers ///////////////////////////////////////////////////////
			
	//OSM maps one as overlay and one base layer 
	var osmUrl='http://a.tile.openstreetmap.org/{z}/{x}/{y}.png';
	var osmUrl2='http://a.tile.openstreetmap.org/{z}/{x}/{y}.png';
	var osmAttrib='Map data &copy; OpenStreetMap contributors';
	var osmAttrib2='Map data &copy; OpenStreetMap contributors';
	var layerOSM=L.tileLayer(osmUrl, {minZoom: 0, maxZoom: 18, attribution: osmAttrib});
	var layerOSM2=L.tileLayer(osmUrl2, {minZoom: 0, maxZoom: 18, attribution: osmAttrib2});
	var layerOSMtransparent=L.tileLayer('http://a.tile.openstreetmap.org/{z}/{x}/{y}.png', {
		attribution: '&copy<a href="www.openstretmap.org/copyright ">OpenStreetMap</a> contributors',
		opacity:0.5,
		format: 'image/png',
		
	});
	//Layers of Geobasis NRW: http://www.bezreg-koeln.nrw.de/brk_internet/organisation/abteilung07/produkte/nrwatlas/index.html 
	//                          (website which provides different Web Map Service (WMS)-URLs)
	var layerDTK10_pan=L.tileLayer.wms('http://www.wms.nrw.de/geobasis/wms_nw_dtk10', {
	   attribution: '| &copy Geobasis NRW 2013',
		layers: 'NW_DTK10_pan',
		format: 'image/png',
		transparent: true,
		opacity:0.4	
	});
	var layerDTK10=L.tileLayer.wms('http://www.wms.nrw.de/geobasis/wms_nw_dtk10', {
		 attribution: '| &copy Geobasis NRW 2013',
		layers: 'nw_dtk10_pan,nw_dtk10_res,NW_DTK10_col,WMS_NW_DTK10',
		format: 'image/png',
		transparent: true
	});
	//layer of the different districts
	var layerDVG=L.tileLayer.wms('http://www.wms.nrw.de/geobasis/wms_nw_dvg', {
		 attribution: '| &copy Geobasis NRW 2013',
		layers: 'WMS_NW_DVG',
		format: 'image/png',
		transparent: true,
		opacity:0.5
	});
	var layerDGK5=L.tileLayer.wms('http://www.wms.nrw.de/geobasis/wms_nw_dgk5', {
	 attribution: '| &copy Geobasis NRW 2013',
		layers: 'WMS_NW_DGK5',
		format: 'image/png',
		transparent: true,
		opacity:0.5
	});
	//Orthophoto layer
	var layerOrtho = L.tileLayer.wms('http://www.wms.nrw.de/geobasis/wms_nw_dop40', {
		layers: 'WMS_NW_DOP40',
		format: 'image/png',
		version:'1.3.0',
		attribution: '| &copy Geobasis NRW 2013'
	});


			
	//The map which is visualized when you get on the website.
	layerOSM.addTo(map);
	layerOSM2.addTo(map2);
	
	


	//Map control: Layer switcher
	var baseMaps={ "OSM": layerOSM,
				   "arial view": layerOrtho,
				   "DTK10":layerDTK10
				   };
	var overlapMaps={"OSM":layerOSMtransparent,
					  "DVG":layerDVG,
					  "DTK10_pan":layerDTK10_pan,
					  "DGK5":layerDGK5,
					  };

	var control=L.control.layers(baseMaps,overlapMaps,{position:'bottomleft'}).addTo(map);
	var control2=L.control.layers(baseMaps,overlapMaps,{position:'bottomleft'}).addTo(map2);

	// Controls

	//miniMap
		var osm2 = new L.TileLayer(osmUrl, {minZoom: 0, maxZoom: 13, attribution: osmAttrib });
	//	var miniMap = new L.Control.MiniMap(osm2, { toggleDisplay: true }).addTo(map);

	//measure Control 
		L.Control.measureControl().addTo(map);
	
	//overview Control- to get to the municipality view of Westfalen-Lippe 
		L.Control.overviewControl().addTo(map);
		L.Control.overviewControl().addTo(map2);
		
	// add explorer control
	L.Control.explorerModus().addTo(map);
		
	//getlocation-- intialise a marker of your current position
	//map.locate({setView: true, maxZoom: 16});

	function mylocation()
	{
		navigator.geolocation.getCurrentPosition(GetLocation)
	}

	function GetLocation(location)
	{
		lat=location.coords.latitude;
		lon=location.coords.longitude;

	}

	function onLocationFound(e) 
	{
		var radius = e.accuracy / 2;

		L.marker(e.latlng,{icon: L.AwesomeMarkers.icon({icon: 'spinner', prefix: 'fa', markerColor: 'red', spin:true}) }).addTo(map)
			.bindPopup("You are within " + radius + " meters from this point. Do you want to start a query with this location?").openPopup();

		L.circle(e.latlng, radius).addTo(map);
		
		//lat=e.coords.latitude;
		//lon=e.coords.longitude;
		
	}

	map.on('locationfound', onLocationFound);

	function onLocationError(e) {
		alert(e.message);
	}

	</script>
	</div>
	</div>

	<!-- Test Button -->
	<!--		<div style="padding-left: 10px;padding-right: 10px; position:absolute; bottom:-10px; width:100%;">
					<input type="button" id="Btn1" value="Sparql ME" onclick="jsonmerge();" class="btnStyle span3" /> -->
				   
		</div>
	
	</body>

</html>
